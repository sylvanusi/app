{
  "version": 3,
  "sources": ["../../@vaadin/date-picker/src/vaadin-date-picker-helper.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2016 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * Get ISO 8601 week number for the given date.\n *\n * @param {!Date} date\n * @return {number} Week number\n */\nexport function getISOWeekNumber(date) {\n  // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n  let dayOfWeek = date.getDay(); // 0 == sunday\n\n  // ISO 8601 use weeks that start on monday so we use\n  // mon=1,tue=2,...sun=7;\n  if (dayOfWeek === 0) {\n    dayOfWeek = 7;\n  }\n  // Find nearest thursday (defines the week in ISO 8601). The week number\n  // for the nearest thursday is the same as for the target date.\n  const nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n  const nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n  const firstOfJanuary = new Date(0, 0);\n  firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n  const timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n  // Rounding the result, as the division doesn't result in an integer\n  // when the given date is inside daylight saving time period.\n  const daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n  return Math.floor(daysSinceFirstOfJanuary / 7 + 1);\n}\n\n/**\n * Creates a new object with the same date, but sets the hours, minutes, seconds and milliseconds to 0.\n *\n * @param {Date} date in system timezone\n * @return {Date} The same date with time elements set to 0, in UTC timezone.\n */\nexport function normalizeDate(date) {\n  const normalizedDate = new Date(date);\n  normalizedDate.setHours(0, 0, 0, 0);\n  return normalizedDate;\n}\n\n/**\n * Creates a new object with the same date, but sets the hours, minutes, seconds and milliseconds to 0.\n *\n * Uses UTC date components to allow handling date instances independently of\n * the system time-zone.\n *\n * @param {Date} date in UTC timezone\n * @return {Date} The same date with time elements set to 0, in UTC timezone.\n */\nexport function normalizeUTCDate(date) {\n  return new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0, 0));\n}\n\n/**\n * Check if two dates are equal.\n *\n * @param {Date} date1\n * @param {Date} date2\n * @param {function(Date): Date} normalizer\n * @return {boolean} True if the given date objects refer to the same date\n */\nexport function dateEquals(date1, date2, normalizer = normalizeDate) {\n  return date1 instanceof Date && date2 instanceof Date && normalizer(date1).getTime() === normalizer(date2).getTime();\n}\n\n/**\n * Extracts the basic component parts of a date (day, month and year)\n * to the expected format.\n * @param {!Date} date\n * @return {{day: number, month: number, year: number}}\n */\nexport function extractDateParts(date) {\n  return {\n    day: date.getDate(),\n    month: date.getMonth(),\n    year: date.getFullYear(),\n  };\n}\n\n/**\n * Check if the given date is in the range of allowed dates.\n *\n * @param {!Date} date The date to check\n * @param {Date} min Range start\n * @param {Date} max Range end\n * @param {function(!DatePickerDate): boolean} isDateDisabled Callback to check if the date is disabled\n * @return {boolean} True if the date is in the range\n */\nexport function dateAllowed(date, min, max, isDateDisabled) {\n  let dateIsDisabled = false;\n  if (typeof isDateDisabled === 'function' && !!date) {\n    const dateToCheck = extractDateParts(date);\n    dateIsDisabled = isDateDisabled(dateToCheck);\n  }\n\n  return (!min || date >= min) && (!max || date <= max) && !dateIsDisabled;\n}\n\n/**\n * Get closest date from array of dates.\n *\n * @param {!Date} date The date to compare dates with\n * @param {!Array<!Date>} dates Array of date objects\n * @return {!Date} Closest date\n */\nexport function getClosestDate(date, dates) {\n  return dates\n    .filter((date) => date !== undefined)\n    .reduce((closestDate, candidate) => {\n      if (!candidate) {\n        return closestDate;\n      }\n\n      if (!closestDate) {\n        return candidate;\n      }\n\n      const candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n      const closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n      return candidateDiff < closestDateDiff ? candidate : closestDate;\n    });\n}\n\n/**\n * Get difference in months between today and given months value.\n *\n * @param {number} months\n * @return {number}\n */\nexport function dateAfterXMonths(months) {\n  const today = new Date();\n  const result = new Date(today);\n  result.setDate(1);\n  result.setMonth(parseInt(months) + today.getMonth());\n  return result;\n}\n\n/**\n * Calculate the year of the date based on the provided reference date.\n * Gets a two-digit year and returns a full year.\n * @param {!Date} referenceDate The date to act as basis in the calculation\n * @param {!number} year Should be in the range of [0, 99]\n * @param {number} month\n * @param {number} day\n * @return {!number} Adjusted year value\n */\nexport function getAdjustedYear(referenceDate, year, month = 0, day = 1) {\n  if (year > 99) {\n    throw new Error('The provided year cannot have more than 2 digits.');\n  }\n  if (year < 0) {\n    throw new Error('The provided year cannot be negative.');\n  }\n  // Year values up to 2 digits are parsed based on the reference date.\n  let adjustedYear = year + Math.floor(referenceDate.getFullYear() / 100) * 100;\n  if (referenceDate < new Date(adjustedYear - 50, month, day)) {\n    adjustedYear -= 100;\n  } else if (referenceDate > new Date(adjustedYear + 50, month, day)) {\n    adjustedYear += 100;\n  }\n  return adjustedYear;\n}\n\n/**\n * Parse date string of one of the following date formats:\n * - ISO 8601 `\"YYYY-MM-DD\"`\n * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n * @param {!string} str Date string to parse\n * @return {Date} Parsed date in system timezone\n */\nexport function parseDate(str) {\n  // Parsing with RegExp to ensure correct format\n  const parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/u.exec(str);\n  if (!parts) {\n    return undefined;\n  }\n\n  const date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n  date.setFullYear(parseInt(parts[1], 10));\n  date.setMonth(parseInt(parts[2], 10) - 1);\n  date.setDate(parseInt(parts[3], 10));\n  return date;\n}\n\n/**\n * Parse date string of one of the following date formats:\n * - ISO 8601 `\"YYYY-MM-DD\"`\n * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n *\n * Uses UTC date components to allow handling date instances independently of\n * the system time-zone.\n *\n * @param {!string} str Date string to parse\n * @return {Date} Parsed date in UTC timezone\n */\nexport function parseUTCDate(str) {\n  // Parsing with RegExp to ensure correct format\n  const parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/u.exec(str);\n  if (!parts) {\n    return undefined;\n  }\n\n  const date = new Date(Date.UTC(0, 0)); // Wrong date (1900-01-01), but with midnight in UTC\n  date.setUTCFullYear(parseInt(parts[1], 10));\n  date.setUTCMonth(parseInt(parts[2], 10) - 1);\n  date.setUTCDate(parseInt(parts[3], 10));\n\n  return date;\n}\n\nfunction formatISODateBase(dateParts) {\n  const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n  let yearSign = '';\n  let yearFmt = '0000';\n  let yearAbs = dateParts.year;\n  if (yearAbs < 0) {\n    yearAbs = -yearAbs;\n    yearSign = '-';\n    yearFmt = '000000';\n  } else if (dateParts.year >= 10000) {\n    yearSign = '+';\n    yearFmt = '000000';\n  }\n\n  const year = yearSign + pad(yearAbs, yearFmt);\n  const month = pad(dateParts.month + 1);\n  const day = pad(dateParts.day);\n  return [year, month, day].join('-');\n}\n\n/**\n * Format a date instance in ISO 8601 (`\"YYYY-MM-DD\"`) or 6-digit extended ISO\n * 8601 (`\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`) format.\n * @param {Date} date in system timezone\n * @returns {string}\n */\nexport function formatISODate(date) {\n  if (!(date instanceof Date)) {\n    return '';\n  }\n\n  return formatISODateBase({\n    year: date.getFullYear(),\n    month: date.getMonth(),\n    day: date.getDate(),\n  });\n}\n\n/**\n * Format a date instance in ISO 8601 (`\"YYYY-MM-DD\"`) or 6-digit extended ISO\n * 8601 (`\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`) format.\n *\n * Uses UTC date components to allow handling date instances independently of\n * the system time-zone.\n *\n * @param {Date} date in UTC timezone\n * @returns {string}\n */\nexport function formatUTCISODate(date) {\n  if (!(date instanceof Date)) {\n    return '';\n  }\n\n  return formatISODateBase({\n    year: date.getUTCFullYear(),\n    month: date.getUTCMonth(),\n    day: date.getUTCDate(),\n  });\n}\n"],
  "mappings": "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",
  "names": ["date"]
}
