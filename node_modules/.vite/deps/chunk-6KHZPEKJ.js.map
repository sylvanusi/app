{
  "version": 3,
  "sources": ["../../@vaadin/component-base/src/data-provider-controller/cache.js", "../../@vaadin/component-base/src/data-provider-controller/helpers.js", "../../@vaadin/component-base/src/data-provider-controller/data-provider-controller.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * A class that stores items with their associated sub-caches.\n */\nexport class Cache {\n  /**\n   * A context object.\n   *\n   * @type {{ isExpanded: (item: unknown) => boolean }}\n   */\n  context;\n\n  /**\n   * The number of items to display per page.\n   *\n   * @type {number}\n   */\n  pageSize;\n\n  /**\n   * An array of cached items.\n   *\n   * @type {object[]}\n   */\n  items = [];\n\n  /**\n   * A map where the key is a requested page and the value is a callback\n   * that will be called with data once the request is complete.\n   *\n   * @type {Record<number, Function>}\n   */\n  pendingRequests = {};\n\n  /**\n   * A map where the key is the index of an item in the `items` array\n   * and the value is a sub-cache associated with that item.\n   *\n   * Note, it's intentionally defined as an object instead of a Map\n   * to ensure that Object.entries() returns an array with keys sorted\n   * in alphabetical order, rather than the order they were added.\n   *\n   * @type {Record<number, Cache>}\n   * @private\n   */\n  #subCacheByIndex = {};\n\n  /**\n   * The number of items.\n   *\n   * @type {number}\n   * @private\n   */\n  #size = 0;\n\n  /**\n   * The total number of items, including items from expanded sub-caches.\n   *\n   * @type {number}\n   * @private\n   */\n  #flatSize = 0;\n\n  /**\n   * @param {Cache['context']} context\n   * @param {number} pageSize\n   * @param {number | undefined} size\n   * @param {Cache | undefined} parentCache\n   * @param {number | undefined} parentCacheIndex\n   */\n  constructor(context, pageSize, size, parentCache, parentCacheIndex) {\n    this.context = context;\n    this.pageSize = pageSize;\n    this.size = size;\n    this.parentCache = parentCache;\n    this.parentCacheIndex = parentCacheIndex;\n    this.#flatSize = size || 0;\n  }\n\n  /**\n   * An item in the parent cache that the current cache is associated with.\n   *\n   * @return {object | undefined}\n   */\n  get parentItem() {\n    return this.parentCache && this.parentCache.items[this.parentCacheIndex];\n  }\n\n  /**\n   * An array of sub-caches sorted in the same order as their associated items\n   * appear in the `items` array.\n   *\n   * @return {Cache[]}\n   */\n  get subCaches() {\n    return Object.values(this.#subCacheByIndex);\n  }\n\n  /**\n   * Whether the cache or any of its descendant caches have pending requests.\n   *\n   * @return {boolean}\n   */\n  get isLoading() {\n    if (Object.keys(this.pendingRequests).length > 0) {\n      return true;\n    }\n\n    return this.subCaches.some((subCache) => subCache.isLoading);\n  }\n\n  /**\n   * The total number of items, including items from expanded sub-caches.\n   *\n   * @return {number}\n   */\n  get flatSize() {\n    return this.#flatSize;\n  }\n\n  /**\n   * The number of items.\n   *\n   * @return {number}\n   */\n  get size() {\n    return this.#size;\n  }\n\n  /**\n   * Sets the number of items.\n   *\n   * @param {number} size\n   */\n  set size(size) {\n    const oldSize = this.#size;\n    if (oldSize === size) {\n      return;\n    }\n\n    this.#size = size;\n\n    if (this.context.placeholder !== undefined) {\n      this.items.length = size || 0;\n      for (let i = 0; i < size || 0; i++) {\n        this.items[i] ||= this.context.placeholder;\n      }\n    }\n\n    if (this.items.length > size) {\n      this.items.length = size || 0;\n    }\n\n    Object.keys(this.pendingRequests).forEach((page) => {\n      const startIndex = parseInt(page) * this.pageSize;\n      if (startIndex >= this.size || 0) {\n        delete this.pendingRequests[page];\n      }\n    });\n  }\n\n  /**\n   * Recalculates the flattened size for the cache and its descendant caches recursively.\n   */\n  recalculateFlatSize() {\n    this.#flatSize =\n      !this.parentItem || this.context.isExpanded(this.parentItem)\n        ? this.size +\n          this.subCaches.reduce((total, subCache) => {\n            subCache.recalculateFlatSize();\n            return total + subCache.flatSize;\n          }, 0)\n        : 0;\n  }\n\n  /**\n   * Adds an array of items corresponding to the given page\n   * to the `items` array.\n   *\n   * @param {number} page\n   * @param {object[]} items\n   */\n  setPage(page, items) {\n    const startIndex = page * this.pageSize;\n    items.forEach((item, i) => {\n      const itemIndex = startIndex + i;\n      if (this.size === undefined || itemIndex < this.size) {\n        this.items[itemIndex] = item;\n      }\n    });\n  }\n\n  /**\n   * Retrieves the sub-cache associated with the item at the given index\n   * in the `items` array.\n   *\n   * @param {number} index\n   * @return {Cache | undefined}\n   */\n  getSubCache(index) {\n    return this.#subCacheByIndex[index];\n  }\n\n  /**\n   * Removes the sub-cache associated with the item at the given index\n   * in the `items` array.\n   *\n   * @param {number} index\n   */\n  removeSubCache(index) {\n    delete this.#subCacheByIndex[index];\n  }\n\n  /**\n   * Removes all sub-caches.\n   */\n  removeSubCaches() {\n    this.#subCacheByIndex = {};\n  }\n\n  /**\n   * Creates and associates a sub-cache for the item at the given index\n   * in the `items` array.\n   *\n   * @param {number} index\n   * @return {Cache}\n   */\n  createSubCache(index) {\n    const subCache = new Cache(this.context, this.pageSize, 0, this, index);\n    this.#subCacheByIndex[index] = subCache;\n    return subCache;\n  }\n\n  /**\n   * Retrieves the flattened index corresponding to the given index\n   * of an item in the `items` array.\n   *\n   * @param {number} index\n   * @return {number}\n   */\n  getFlatIndex(index) {\n    const clampedIndex = Math.max(0, Math.min(this.size - 1, index));\n\n    return this.subCaches.reduce((prev, subCache) => {\n      const index = subCache.parentCacheIndex;\n      return clampedIndex > index ? prev + subCache.flatSize : prev;\n    }, clampedIndex);\n  }\n}\n", "/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * @typedef {import('./cache.js').Cache} Cache\n */\n\n/**\n * Returns context for the given flattened index, including:\n * - the corresponding cache\n * - the cache level\n * - the corresponding item (if loaded)\n * - the item's index in the cache's items array\n * - the page containing the item\n *\n * @param {Cache} cache\n * @param {number} flatIndex\n * @param {number} level\n */\nexport function getFlatIndexContext(cache, flatIndex, level = 0) {\n  let levelIndex = flatIndex;\n\n  for (const subCache of cache.subCaches) {\n    const index = subCache.parentCacheIndex;\n    if (levelIndex <= index) {\n      break;\n    } else if (levelIndex <= index + subCache.flatSize) {\n      return getFlatIndexContext(subCache, levelIndex - index - 1, level + 1);\n    }\n    levelIndex -= subCache.flatSize;\n  }\n\n  return {\n    cache,\n    item: cache.items[levelIndex],\n    index: levelIndex,\n    page: Math.floor(levelIndex / cache.pageSize),\n    level,\n  };\n}\n\n/**\n * Returns context for the given item, including:\n * - the cache containing the item\n * - the cache level\n * - the item\n * - the item's index in the cache's items array\n * - the item's flattened index\n * - the item's sub-cache (if exists)\n * - the page containing the item\n *\n * If the item isn't found, the method returns undefined.\n *\n * @param {{ getItemId: (item: unknown) => unknown}} context\n * @param {Cache} cache\n * @param {unknown} targetItem\n * @param {number} level\n * @param {number} levelFlatIndex\n */\nexport function getItemContext({ getItemId }, cache, targetItem, level = 0, levelFlatIndex = 0) {\n  // Start looking in this cache\n  for (let index = 0; index < cache.items.length; index++) {\n    const item = cache.items[index];\n    if (!!item && getItemId(item) === getItemId(targetItem)) {\n      return {\n        cache,\n        level,\n        item,\n        index,\n        page: Math.floor(index / cache.pageSize),\n        subCache: cache.getSubCache(index),\n        flatIndex: levelFlatIndex + cache.getFlatIndex(index),\n      };\n    }\n  }\n\n  // Look through sub-caches\n  for (const subCache of cache.subCaches) {\n    const parentItemFlatIndex = levelFlatIndex + cache.getFlatIndex(subCache.parentCacheIndex);\n    const result = getItemContext({ getItemId }, subCache, targetItem, level + 1, parentItemFlatIndex + 1);\n    if (result) {\n      return result;\n    }\n  }\n}\n\n/**\n * Recursively returns the globally flat index of the item the given indexes point to.\n * Each index in the array points to a sub-item of the previous index.\n * Using `Infinity` as an index will point to the last item on the level.\n *\n * @param {Cache} cache\n * @param {number[]} path\n * @param {number} flatIndex\n * @return {number}\n */\nexport function getFlatIndexByPath(cache, [levelIndex, ...subIndexes], flatIndex = 0) {\n  if (levelIndex === Infinity) {\n    // Treat Infinity as the last index on the level\n    levelIndex = cache.size - 1;\n  }\n\n  const flatIndexOnLevel = cache.getFlatIndex(levelIndex);\n  const subCache = cache.getSubCache(levelIndex);\n  if (subCache && subCache.flatSize > 0 && subIndexes.length) {\n    return getFlatIndexByPath(subCache, subIndexes, flatIndex + flatIndexOnLevel + 1);\n  }\n  return flatIndex + flatIndexOnLevel;\n}\n", "/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { Cache } from './cache.js';\nimport { getFlatIndexByPath, getFlatIndexContext, getItemContext } from './helpers.js';\n\n/**\n * A controller that stores and manages items loaded with a data provider.\n */\nexport class DataProviderController extends EventTarget {\n  /**\n   * The controller host element.\n   *\n   * @param {HTMLElement}\n   */\n  host;\n\n  /**\n   * A callback that returns data based on the passed params such as\n   * `page`, `pageSize`, `parentItem`, etc.\n   */\n  dataProvider;\n\n  /**\n   * A callback that returns additional params that need to be passed\n   * to the data provider callback with every request.\n   */\n  dataProviderParams;\n\n  /**\n   * A number of items to display per page.\n   *\n   * @type {number}\n   */\n  pageSize;\n\n  /**\n   * A callback that returns whether the given item is expanded.\n   *\n   * @type {(item: unknown) => boolean}\n   */\n  isExpanded;\n\n  /**\n   * A callback that returns the id for the given item and that\n   * is used when checking object items for equality.\n   *\n   * @type { (item: unknown) => unknown}\n   */\n  getItemId;\n\n  /**\n   * A reference to the root cache instance.\n   *\n   * @param {Cache}\n   */\n  rootCache;\n\n  /**\n   * A placeholder item that is used to indicate that the item is not loaded yet.\n   *\n   * @type {unknown}\n   */\n  placeholder;\n\n  /**\n   * A callback that returns whether the given item is a placeholder.\n   *\n   * @type {(item: unknown) => boolean}\n   */\n  isPlaceholder;\n\n  constructor(\n    host,\n    { size, pageSize, isExpanded, getItemId, isPlaceholder, placeholder, dataProvider, dataProviderParams },\n  ) {\n    super();\n    this.host = host;\n    this.pageSize = pageSize;\n    this.getItemId = getItemId;\n    this.isExpanded = isExpanded;\n    this.placeholder = placeholder;\n    this.isPlaceholder = isPlaceholder;\n    this.dataProvider = dataProvider;\n    this.dataProviderParams = dataProviderParams;\n    this.rootCache = this.#createRootCache(size);\n  }\n\n  /**\n   * The total number of items, including items from expanded sub-caches.\n   */\n  get flatSize() {\n    return this.rootCache.flatSize;\n  }\n\n  /** @private */\n  get #cacheContext() {\n    return {\n      isExpanded: this.isExpanded,\n      placeholder: this.placeholder,\n    };\n  }\n\n  /**\n   * Whether the root cache or any of its decendant caches have pending requests.\n   *\n   * @return {boolean}\n   */\n  isLoading() {\n    return this.rootCache.isLoading;\n  }\n\n  /**\n   * Sets the page size and clears the cache.\n   *\n   * @param {number} pageSize\n   */\n  setPageSize(pageSize) {\n    this.pageSize = pageSize;\n    this.clearCache();\n  }\n\n  /**\n   * Sets the data provider callback and clears the cache.\n   *\n   * @type {Function}\n   */\n  setDataProvider(dataProvider) {\n    this.dataProvider = dataProvider;\n    this.clearCache();\n  }\n\n  /**\n   * Recalculates the flattened size.\n   */\n  recalculateFlatSize() {\n    this.rootCache.recalculateFlatSize();\n  }\n\n  /**\n   * Clears the cache.\n   */\n  clearCache() {\n    this.rootCache = this.#createRootCache(this.rootCache.size);\n  }\n\n  /**\n   * Returns context for the given flattened index, including:\n   * - the corresponding cache\n   * - the cache level\n   * - the corresponding item (if loaded)\n   * - the item's index in the cache's items array\n   * - the page containing the item\n   *\n   * @param {number} flatIndex\n   */\n  getFlatIndexContext(flatIndex) {\n    return getFlatIndexContext(this.rootCache, flatIndex);\n  }\n\n  /**\n   * Returns context for the given item, including:\n   * - the cache containing the item\n   * - the cache level\n   * - the item\n   * - the item's index in the cache's items array\n   * - the item's flattened index\n   * - the item's sub-cache (if exists)\n   * - the page containing the item\n   *\n   * If the item isn't found, the method returns undefined.\n   */\n  getItemContext(item) {\n    return getItemContext({ getItemId: this.getItemId }, this.rootCache, item);\n  }\n\n  /**\n   * Returns the flattened index for the item that the given indexes point to.\n   * Each index in the path array points to a sub-item of the previous index.\n   * Using `Infinity` as an index will point to the last item on the level.\n   *\n   * @param {number[]} path\n   * @return {number}\n   */\n  getFlatIndexByPath(path) {\n    return getFlatIndexByPath(this.rootCache, path);\n  }\n\n  /**\n   * Requests the data provider to load the page with the item corresponding\n   * to the given flattened index. If the item is already loaded, the method\n   * returns immediatelly.\n   *\n   * @param {number} flatIndex\n   */\n  ensureFlatIndexLoaded(flatIndex) {\n    const { cache, page, item } = this.getFlatIndexContext(flatIndex);\n\n    if (!this.#isItemLoaded(item)) {\n      this.#loadCachePage(cache, page);\n    }\n  }\n\n  /**\n   * Creates a sub-cache for the item corresponding to the given flattened index and\n   * requests the data provider to load the first page into the created sub-cache.\n   * If the sub-cache already exists, the method returns immediatelly.\n   *\n   * @param {number} flatIndex\n   */\n  ensureFlatIndexHierarchy(flatIndex) {\n    const { cache, item, index } = this.getFlatIndexContext(flatIndex);\n\n    if (this.#isItemLoaded(item) && this.isExpanded(item) && !cache.getSubCache(index)) {\n      const subCache = cache.createSubCache(index);\n      this.#loadCachePage(subCache, 0);\n    }\n  }\n\n  /**\n   * Loads the first page into the root cache.\n   */\n  loadFirstPage() {\n    this.#loadCachePage(this.rootCache, 0);\n  }\n\n  /**\n   * Override to prevent loading of the cache page under certain conditions.\n   *\n   * @param {Cache} cache\n   * @param {number} page\n   * @protected\n   */\n  _shouldLoadCachePage(_cache, _page) {\n    return true;\n  }\n\n  /** @private */\n  #createRootCache(size) {\n    return new Cache(this.#cacheContext, this.pageSize, size);\n  }\n\n  /** @private */\n  #loadCachePage(cache, page) {\n    if (!this.dataProvider || cache.pendingRequests[page] || !this._shouldLoadCachePage(cache, page)) {\n      return;\n    }\n\n    let params = {\n      page,\n      pageSize: this.pageSize,\n      parentItem: cache.parentItem,\n    };\n\n    if (this.dataProviderParams) {\n      params = { ...params, ...this.dataProviderParams() };\n    }\n\n    const callback = (items, size) => {\n      if (cache.pendingRequests[page] !== callback) {\n        return;\n      }\n\n      if (size !== undefined) {\n        cache.size = size;\n      } else if (params.parentItem) {\n        cache.size = items.length;\n      }\n\n      cache.setPage(page, items);\n\n      this.recalculateFlatSize();\n\n      this.dispatchEvent(new CustomEvent('page-received'));\n\n      delete cache.pendingRequests[page];\n\n      this.dispatchEvent(new CustomEvent('page-loaded'));\n    };\n\n    cache.pendingRequests[page] = callback;\n\n    this.dispatchEvent(new CustomEvent('page-requested'));\n\n    this.dataProvider(params, callback);\n  }\n\n  /** @private */\n  #isItemLoaded(item) {\n    if (this.isPlaceholder) {\n      return !this.isPlaceholder(item);\n    } else if (this.placeholder) {\n      return item !== this.placeholder;\n    }\n    return !!item;\n  }\n}\n"],
  "mappings": "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",
  "names": ["index"]
}
