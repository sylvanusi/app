{
  "version": 3,
  "sources": ["../../@vaadin/a11y-base/src/tabindex-mixin.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { DisabledMixin } from './disabled-mixin.js';\n\n/**\n * A mixin to toggle the `tabindex` attribute.\n *\n * The attribute is set to -1 whenever the user disables the element\n * and restored with the last known value once the element is enabled.\n *\n * @polymerMixin\n * @mixes DisabledMixin\n */\nexport const TabindexMixin = (superclass) =>\n  class TabindexMixinClass extends DisabledMixin(superclass) {\n    static get properties() {\n      return {\n        /**\n         * Indicates whether the element can be focused and where it participates in sequential keyboard navigation.\n         *\n         * @protected\n         */\n        tabindex: {\n          type: Number,\n          reflectToAttribute: true,\n          observer: '_tabindexChanged',\n          sync: true,\n        },\n\n        /**\n         * Stores the last known tabindex since the element has been disabled.\n         *\n         * @protected\n         */\n        _lastTabIndex: {\n          type: Number,\n        },\n      };\n    }\n\n    /**\n     * When the element gets disabled, the observer saves the last known tabindex\n     * and makes the element not focusable by setting tabindex to -1.\n     * As soon as the element gets enabled, the observer restores the last known tabindex\n     * so that the element can be focusable again.\n     *\n     * @protected\n     * @override\n     */\n    _disabledChanged(disabled, oldDisabled) {\n      super._disabledChanged(disabled, oldDisabled);\n\n      if (this.__shouldAllowFocusWhenDisabled()) {\n        return;\n      }\n\n      if (disabled) {\n        if (this.tabindex !== undefined) {\n          this._lastTabIndex = this.tabindex;\n        }\n        this.setAttribute('tabindex', '-1');\n      } else if (oldDisabled) {\n        if (this._lastTabIndex !== undefined) {\n          this.setAttribute('tabindex', this._lastTabIndex);\n        } else {\n          this.tabindex = undefined;\n        }\n      }\n    }\n\n    /**\n     * When the user has changed tabindex while the element is disabled,\n     * the observer reverts tabindex to -1 and rather saves the new tabindex value to apply it later.\n     * The new value will be applied as soon as the element becomes enabled.\n     *\n     * @protected\n     */\n    _tabindexChanged(tabindex) {\n      if (this.__shouldAllowFocusWhenDisabled()) {\n        return;\n      }\n\n      if (this.disabled && tabindex !== -1) {\n        this._lastTabIndex = tabindex;\n        this.setAttribute('tabindex', '-1');\n      }\n    }\n\n    /**\n     * Overrides the native `focus` method in order to prevent\n     * focusing the element when it is disabled. Note, setting\n     * `tabindex` to -1 does not prevent the element from being\n     * programmatically focusable.\n     *\n     * @param {FocusOptions=} options\n     * @protected\n     * @override\n     */\n    focus(options) {\n      if (!this.disabled || this.__shouldAllowFocusWhenDisabled()) {\n        super.focus(options);\n      }\n    }\n\n    /**\n     * Returns whether the component should be focusable when disabled.\n     * Returns false by default.\n     *\n     * @private\n     * @return {boolean}\n     */\n    __shouldAllowFocusWhenDisabled() {\n      return false;\n    }\n  };\n"],
  "mappings": ";;;;;AAgBO,IAAM,gBAAgB,CAAC,eAC5B,MAAM,2BAA2B,cAAc,UAAU,EAAE;AAAA,EACzD,WAAW,aAAa;AACtB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAML,UAAU;AAAA,QACR,MAAM;AAAA,QACN,oBAAoB;AAAA,QACpB,UAAU;AAAA,QACV,MAAM;AAAA,MACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOA,eAAe;AAAA,QACb,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,iBAAiB,UAAU,aAAa;AACtC,UAAM,iBAAiB,UAAU,WAAW;AAE5C,QAAI,KAAK,+BAA+B,GAAG;AACzC;AAAA,IACF;AAEA,QAAI,UAAU;AACZ,UAAI,KAAK,aAAa,QAAW;AAC/B,aAAK,gBAAgB,KAAK;AAAA,MAC5B;AACA,WAAK,aAAa,YAAY,IAAI;AAAA,IACpC,WAAW,aAAa;AACtB,UAAI,KAAK,kBAAkB,QAAW;AACpC,aAAK,aAAa,YAAY,KAAK,aAAa;AAAA,MAClD,OAAO;AACL,aAAK,WAAW;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,iBAAiB,UAAU;AACzB,QAAI,KAAK,+BAA+B,GAAG;AACzC;AAAA,IACF;AAEA,QAAI,KAAK,YAAY,aAAa,IAAI;AACpC,WAAK,gBAAgB;AACrB,WAAK,aAAa,YAAY,IAAI;AAAA,IACpC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,MAAM,SAAS;AACb,QAAI,CAAC,KAAK,YAAY,KAAK,+BAA+B,GAAG;AAC3D,YAAM,MAAM,OAAO;AAAA,IACrB;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,iCAAiC;AAC/B,WAAO;AAAA,EACT;AACF;",
  "names": []
}
