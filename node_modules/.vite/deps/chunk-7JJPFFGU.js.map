{
  "version": 3,
  "sources": ["../../@vaadin/grid/src/vaadin-grid-active-item-mixin.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2016 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\nimport { isElementFocusable } from '@vaadin/a11y-base/src/focus-utils.js';\n\n/**\n * @param {!Element} target\n * @return {boolean}\n * @protected\n */\nexport const isFocusable = (target) => {\n  return (\n    target.offsetParent &&\n    !target.part.contains('body-cell') &&\n    isElementFocusable(target) &&\n    getComputedStyle(target).visibility !== 'hidden'\n  );\n};\n\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = (superClass) =>\n  class ActiveItemMixin extends superClass {\n    static get properties() {\n      return {\n        /**\n         * The item user has last interacted with. Turns to `null` after user deactivates\n         * the item by re-interacting with the currently active item.\n         * @type {GridItem}\n         */\n        activeItem: {\n          type: Object,\n          notify: true,\n          value: null,\n          sync: true,\n        },\n      };\n    }\n\n    /** @protected */\n    ready() {\n      super.ready();\n\n      this.$.scroller.addEventListener('click', this._onClick.bind(this));\n      this.addEventListener('cell-activate', this._activateItem.bind(this));\n      this.addEventListener('row-activate', this._activateItem.bind(this));\n    }\n\n    /** @private */\n    _activateItem(e) {\n      const model = e.detail.model;\n      const clickedItem = model ? model.item : null;\n\n      if (clickedItem) {\n        this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n      }\n    }\n\n    /**\n     * Checks whether the click event should not activate the cell on which it occurred.\n     *\n     * @protected\n     */\n    _shouldPreventCellActivationOnClick(e) {\n      const { cell } = this._getGridEventLocation(e);\n      return (\n        // Something has handled this click already, e. g., <vaadin-grid-sorter>\n        e.defaultPrevented ||\n        // No clicked cell available\n        !cell ||\n        // Cell is a details cell\n        cell.part.contains('details-cell') ||\n        // Cell is the empty state cell\n        cell === this.$.emptystatecell ||\n        // Cell content is focused\n        cell._content.contains(this.getRootNode().activeElement) ||\n        // Clicked on a focusable element\n        this._isFocusable(e.target) ||\n        // Clicked on a label element\n        e.target instanceof HTMLLabelElement\n      );\n    }\n\n    /**\n     * @param {!MouseEvent} e\n     * @protected\n     */\n    _onClick(e) {\n      if (this._shouldPreventCellActivationOnClick(e)) {\n        return;\n      }\n\n      const { cell } = this._getGridEventLocation(e);\n      if (cell) {\n        this.dispatchEvent(\n          new CustomEvent('cell-activate', {\n            detail: {\n              model: this.__getRowModel(cell.parentElement),\n            },\n          }),\n        );\n      }\n    }\n\n    /**\n     * @param {!Element} target\n     * @return {boolean}\n     * @protected\n     */\n    _isFocusable(target) {\n      return isFocusable(target);\n    }\n\n    /**\n     * Fired when the `activeItem` property changes.\n     *\n     * @event active-item-changed\n     */\n\n    /**\n     * Fired when the cell is activated with click or keyboard.\n     *\n     * @event cell-activate\n     */\n  };\n"],
  "mappings": ";;;;;AAaO,IAAM,cAAc,CAAC,WAAW;AACrC,SACE,OAAO,gBACP,CAAC,OAAO,KAAK,SAAS,WAAW,KACjC,mBAAmB,MAAM,KACzB,iBAAiB,MAAM,EAAE,eAAe;AAE5C;AAKO,IAAM,kBAAkB,CAAC,eAC9B,MAAM,wBAAwB,WAAW;AAAA,EACvC,WAAW,aAAa;AACtB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAML,YAAY;AAAA,QACV,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,QAAQ;AACN,UAAM,MAAM;AAEZ,SAAK,EAAE,SAAS,iBAAiB,SAAS,KAAK,SAAS,KAAK,IAAI,CAAC;AAClE,SAAK,iBAAiB,iBAAiB,KAAK,cAAc,KAAK,IAAI,CAAC;AACpE,SAAK,iBAAiB,gBAAgB,KAAK,cAAc,KAAK,IAAI,CAAC;AAAA,EACrE;AAAA;AAAA,EAGA,cAAc,GAAG;AACf,UAAM,QAAQ,EAAE,OAAO;AACvB,UAAM,cAAc,QAAQ,MAAM,OAAO;AAEzC,QAAI,aAAa;AACf,WAAK,aAAa,CAAC,KAAK,YAAY,KAAK,YAAY,WAAW,IAAI,cAAc;AAAA,IACpF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,oCAAoC,GAAG;AACrC,UAAM,EAAE,KAAK,IAAI,KAAK,sBAAsB,CAAC;AAC7C;AAAA;AAAA,MAEE,EAAE;AAAA,MAEF,CAAC;AAAA,MAED,KAAK,KAAK,SAAS,cAAc;AAAA,MAEjC,SAAS,KAAK,EAAE;AAAA,MAEhB,KAAK,SAAS,SAAS,KAAK,YAAY,EAAE,aAAa;AAAA,MAEvD,KAAK,aAAa,EAAE,MAAM;AAAA,MAE1B,EAAE,kBAAkB;AAAA;AAAA,EAExB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,SAAS,GAAG;AACV,QAAI,KAAK,oCAAoC,CAAC,GAAG;AAC/C;AAAA,IACF;AAEA,UAAM,EAAE,KAAK,IAAI,KAAK,sBAAsB,CAAC;AAC7C,QAAI,MAAM;AACR,WAAK;AAAA,QACH,IAAI,YAAY,iBAAiB;AAAA,UAC/B,QAAQ;AAAA,YACN,OAAO,KAAK,cAAc,KAAK,aAAa;AAAA,UAC9C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,aAAa,QAAQ;AACnB,WAAO,YAAY,MAAM;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaF;",
  "names": []
}
